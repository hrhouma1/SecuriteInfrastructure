# Quiz sur VIP, VGW, Keepalived et le protocole VRRP (suite de la partie 02)

---

#### **Section 1 : Configuration et rôle de la VIP et du VGW**

1. **Quelle est la fonction principale d'une VIP (Virtual IP) dans une infrastructure réseau ?**  
   a) Fournir une passerelle Internet pour les machines du réseau.  
   b) Offrir une adresse IP unique et stable partagée entre plusieurs serveurs pour la haute disponibilité.  
   c) Gérer la configuration DNS entre les machines.  
   d) Attribuer dynamiquement des adresses IP aux serveurs backend.

   **Réponse : b**

---

2. **Quelle adresse IP est attribuée à la VIP dans l'exemple ci-dessus ?**  
   a) 192.168.100.99  
   b) 10.11.12.99  
   c) 20.21.22.254  
   d) 172.168.1.2  

   **Réponse : b**

---

3. **Pourquoi la VIP doit être sur le même réseau que les machines Master et Backup ?**  
   a) Pour simplifier la configuration DNS.  
   b) Pour garantir que les clients peuvent accéder à la VIP sans routage supplémentaire.  
   c) Pour éviter les conflits d'adresses IP.  
   d) Parce que VRRP ne fonctionne pas avec plusieurs réseaux.

   **Réponse : b**

---

4. **Quelle commande permet de vérifier si la VIP est attribuée à une machine ?**  
   a) `ping <adresse VIP>`  
   b) `ip addr show <interface>`  
   c) `nslookup <nom de la VIP>`  
   d) `systemctl status keepalived`

   **Réponse : b**

---

5. **Qu'est-ce qui déclenche la bascule de la VIP entre le Master et le Backup ?**  
   a) Une modification manuelle de la configuration.  
   b) Un redémarrage du service DNS.  
   c) Une défaillance du Master détectée par Keepalived via VRRP.  
   d) Une perte de connectivité Internet sur le Backup.

   **Réponse : c**

---

6. **Pourquoi est-il important d'utiliser une VGW (Virtual Gateway) sur le réseau Backend ?**  
   a) Pour fournir un point d'accès unique aux machines backend même en cas de panne.  
   b) Pour permettre la synchronisation entre les machines Master et Backup.  
   c) Pour garantir une connectivité Internet stable.  
   d) Pour assurer la résolution DNS entre les machines backend.

   **Réponse : a**

---

#### **Section 2 : Interfaces réseau (NIC) dans l'infrastructure**

7. **Combien de NIC sont configurées sur le Master et le Backup dans cette architecture ?**  
   a) 1  
   b) 2  
   c) 3  
   d) 4  

   **Réponse : c**

---

8. **Quelle interface réseau est utilisée pour la VIP dans l'exemple ?**  
   a) NIC1 (DMZ)  
   b) NIC2 (Backend)  
   c) NIC3 (Sync)  
   d) Toutes les interfaces  

   **Réponse : a**

---

9. **Pourquoi chaque machine backend (Noeud1, Noeud2) utilise-t-elle une seule NIC ?**  
   a) Pour simplifier la configuration réseau.  
   b) Parce que le trafic des backend est isolé sur le réseau 192.168.100.0/24.  
   c) Parce que les machines backend n'ont pas besoin d'accéder au réseau DMZ.  
   d) Toutes ces réponses.  

   **Réponse : d**

---

10. **Comment configurer une passerelle par défaut sur une machine backend (Noeud1 ou Noeud2) ?**  
   a) Modifier le fichier `/etc/hosts`.  
   b) Ajouter `gateway4: 192.168.100.99` dans le fichier de configuration Netplan.  
   c) Redémarrer le service DNS.  
   d) Configurer une VIP différente sur chaque backend.  

   **Réponse : b**

---

#### **Section 3 : Protocole VRRP et Keepalived**

11. **Quel est le rôle principal du protocole VRRP dans Keepalived ?**  
   a) Configurer automatiquement les DNS pour la VIP.  
   b) Assurer la redondance de la VIP entre plusieurs serveurs.  
   c) Activer le routage dynamique sur le réseau Backend.  
   d) Synchroniser les sessions entre les machines backend.  

   **Réponse : b**

---

12. **Que représente le paramètre `priority` dans la configuration VRRP ?**  
   a) La priorité des paquets réseau entre les machines.  
   b) L'ordre de basculement entre le Master et le Backup.  
   c) La fréquence des annonces envoyées par Keepalived.  
   d) La configuration de la passerelle par défaut.  

   **Réponse : b**

---

13. **Quelle est la différence entre le Master et le Backup dans VRRP ?**  
   a) Le Master gère activement la VIP, tandis que le Backup est en attente pour prendre le relais en cas de panne.  
   b) Le Master et le Backup gèrent la VIP simultanément.  
   c) Le Master ne participe pas à la synchronisation des configurations, contrairement au Backup.  
   d) Le Backup est toujours configuré avec une priorité plus élevée que le Master.  

   **Réponse : a**

---

14. **Quelle commande permet de redémarrer le service Keepalived sur une machine ?**  
   a) `sudo service keepalived restart`  
   b) `sudo systemctl restart keepalived`  
   c) `sudo systemctl enable keepalived`  
   d) `sudo restart keepalived.conf`  

   **Réponse : b**

---

15. **Que se passe-t-il si deux machines dans un cluster VRRP ont la même priorité ?**  
   a) Les deux machines partageront la VIP.  
   b) Une des machines sera élue aléatoirement comme Master.  
   c) La VIP sera automatiquement désactivée.  
   d) Le Backup prendra toujours la priorité sur le Master.  

   **Réponse : b**

---

#### **Section 4 : Dépannage et tests**

16. **Quelle commande permet de tester la connectivité avec une VIP depuis une machine cliente ?**  
   a) `ping <adresse VIP>`  
   b) `ip addr show <interface>`  
   c) `dig <adresse VIP>`  
   d) `systemctl status keepalived`  

   **Réponse : a**

---

17. **Que vérifier si la VIP ne bascule pas correctement entre le Master et le Backup ?**  
   a) La priorité dans la configuration VRRP.  
   b) La connectivité entre les machines Master et Backup.  
   c) L'état du service Keepalived sur chaque machine.  
   d) Toutes ces réponses.  

   **Réponse : d**

---

18. **Comment tester manuellement le basculement de la VIP entre le Master et le Backup ?**  
   a) Arrêter le service Keepalived sur le Master et vérifier que le Backup prend la VIP.  
   b) Modifier la priorité sur le Master et redémarrer le service.  
   c) Pinger la VIP depuis une machine cliente et observer les réponses.  
   d) Toutes ces réponses.  

   **Réponse : d**

---

19. **Si une machine backend ne peut pas atteindre Internet via la VGW, quelles vérifications effectuer ?**  
   a) Vérifier que la passerelle par défaut est configurée correctement.  
   b) Tester la connectivité entre la machine backend et la VGW (192.168.100.99).  
   c) S'assurer que la VIP est active sur le Master ou le Backup.  
   d) Toutes ces réponses.  

   **Réponse : d**

---

20. **Pourquoi est-il recommandé de configurer un mot de passe pour le protocole VRRP ?**  
   a) Pour empêcher un attaquant de prendre le contrôle de la VIP.  
   b) Pour synchroniser les configurations DNS entre les machines.  
   c) Pour garantir que le service Keepalived redémarre automatiquement après une panne.  
   d) Pour permettre au Backup de surveiller le Master.  

   **Réponse : a**
